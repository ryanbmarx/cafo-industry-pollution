{# Override the `container` block to disable default layout. #}
{% block container %}
{% block content %}
<!-- 
  #############################################
  ### WAIT! DO NOT EDIT HERE!
  ### EDIT IN THE SPREADSHEET!
  #############################################
-->
{{intro|markdown}}{{intro|markdown}}{{intro|markdown}}

<div class='row'>
	<div class='four columns'>
    <div id='legend-container' class='key'>XX2342342X</div>
		{% include "_map_buttons.html" %}
	</div>
	<div class='eight columns'>
		<div id="map"></div>
	</div>
</div>

<section class='credits'>
	<p>{{ sources }}</p>
</section>
<!-- <small>Map tiles by <a href="http://stamen.com">Stamen Design</a>, under <a href="http://creativecommons.org/licenses/by/3.0">CC BY 3.0</a>. Data by <a href="http://openstreetmap.org">OpenStreetMap</a>, under <a href="http://www.openstreetmap.org/copyright">ODbL</a>.</small> -->
{% endblock content %}
{% endblock container %}

{% block library_scripts %}
<script src="//{{ ROOT_URL }}/js/vendor.min.js"></script>
{% endblock %}

{% block scripts %}
<script src="//{{ ROOT_URL }}/js/app.min.js"></script>
<script>
(function(window, document) {
  // TODO: Bundle vendor CSS into a single file 
  var CSS = [
	"//s3.amazonaws.com/media.apps.chicagotribune.com/graphics-toolbox/skeleton.css",
    "//{{ ROOT_URL }}/css/leaflet.css",
    "//{{ ROOT_URL }}/css/styles.css"
  ];    
  CSS.forEach(function(url) {
    var link = document.createElement('link');
    link.setAttribute('rel', 'stylesheet');
    link.setAttribute('href', url);
    document.head.appendChild(link);
  });
  var dataLabels = {
    {% for row in buttons %}
      hogs_data_{{ row.data_att }}: {
        primary: "{{ row.label }}",
        secondary:"{{ row.secondary_label }}"
      }{% if not loop.last %}, {% endif %}
    {% endfor %}
  };
  window.onload = function(){
    var map = new CafoMap.CafoMap({
        /*Options here*/
        mapTargetID:"map",
        dataRootUrl: "//{{ ROOT_URL }}/data/",
        propertyToMap:"hogs_data_FARM_1000",
        countyFillColor:"#FF0000",
        legendContainer:document.getElementById('legend-container'),
        dataLabelLookup:dataLabels
     });

    var mapButtons = new CafoMap.CafoMapButtons({
      buttons:document.getElementsByClassName('map-button'),
      map:map
    });
  };
})(window, document);    
</script>
{% endblock scripts %}
